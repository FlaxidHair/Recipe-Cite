import{k as z,j as J,u as K,l as r,e as o,c as g,b as i,a as t,w as l,h as L,r as s,o as v,n as O,p as A,f as u,g as E,F as I,d as G,t as _,m as U}from"./index-D3MtY88c.js";const H={key:0,class:"main d-flex flex-column align-center"},Q={class:"w-xl-50 w-lg-50 w-md-50 w-sm-75 w-100 mr-auto ml-auto border-thin mb-5"},X={class:"d-flex"},Y={class:"d-flex flex-column align-center"},Z={class:"d-flex ga-5 justify-center flex-wrap"},ee=["onClick","item"],te={class:"d-flex mt-1"},ae={__name:"Notes",setup(le){const p=z();J(()=>{n.getNotes});const n=K(),b=r(null),k=r(""),w=r("");let m=r(!1);const V=r([]),q=r({required:f=>!!f||"Необходимо заполнить поле!"});function F(){m&&fetch("https://script.google.com/macros/s/AKfycbwf7Ty0tbwPJJbm3gb9FRW0wk0kMRoyqCNeK9xMB9n4a0pfWktu3eiWnbB2dzeLHrcO/exec",{method:"POST",body:new FormData(b.value)}).then(f=>{f.status==200&&(V.value.reset(),n.getNotes(),alert("Заметка добавлена"))})}return(f,e)=>{const M=s("v-text-field"),c=s("v-btn"),R=s("v-tooltip"),D=s("v-textarea"),P=s("v-form"),N=s("v-card-title"),y=s("v-card-text"),x=s("v-card"),W=s("v-hover"),C=s("v-spacer"),S=s("v-card-actions"),h=s("v-dialog"),$=s("v-divider"),j=s("v-container");return o(n).loading?L("",!0):(v(),g("div",H,[e[11]||(e[11]=i("h2",{class:"mt-10 mb-5"},"Добавить заметку",-1)),t(j,null,{default:l(()=>[i("div",Q,[t(P,{ref_key:"vform2",ref:V,modelValue:o(m),"onUpdate:modelValue":e[4]||(e[4]=a=>O(m)?m.value=a:m=a)},{default:l(()=>[i("form",{ref_key:"forma",ref:b,onSubmit:e[3]||(e[3]=A(()=>{},["prevent"]))},[i("div",X,[t(M,{required:"",rules:[q.value.required],name:"Title",modelValue:k.value,"onUpdate:modelValue":e[0]||(e[0]=a=>k.value=a),label:"Введите заголовок",tile:"",variant:"solo","hide-details":"",class:""},null,8,["rules","modelValue"]),i("div",null,[t(c,{onClick:e[1]||(e[1]=a=>F()),disabled:!o(p).isLogin,class:"elevation-2",type:"submit",width:"120px",tile:"",height:"56px",flat:""},{default:l(()=>e[9]||(e[9]=[u("Добавить")])),_:1},8,["disabled"]),o(p).isLogin?L("",!0):(v(),E(R,{key:0,activator:"parent",location:"end"},{default:l(()=>e[10]||(e[10]=[u("Войдите что бы добавить!")])),_:1}))])]),t(D,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=a=>w.value=a),name:"Subtitle",label:"Введите заметку","no-resize":"","max-rows":"10",tile:"",variant:"filled","hide-details":"",class:""},null,8,["modelValue"])],544)]),_:1},8,["modelValue"])]),i("div",Y,[t(h,{"max-width":"800"},{activator:l(({props:a})=>[i("div",Z,[(v(!0),g(I,null,G(o(n).getterNotes,d=>(v(),g("div",{key:d,class:"d-flex ga-5 mb-7"},[t(W,{"open-delay":"50"},{default:l(({isHovering:T,props:B})=>[i("div",U({onClick:()=>{o(n).selectNote=d},item:d,class:"w-100 cursor-pointer d-flex",ref_for:!0},a),[t(x,U({class:["d-flex flex-column align-center",T,B],"min-width":"300px",height:"200px",ref_for:!0},B,{elevation:T?8:2}),{default:l(()=>[t(N,{class:"mr-auto ml-auto"},{default:l(()=>[u(_(d.Title),1)]),_:2},1024),t(y,{class:"h-25 text-caption"},{default:l(()=>[u(_(d.Subtitle),1)]),_:2},1024)]),_:2},1040,["class","elevation"])],16,ee)]),_:2},1024)]))),128))])]),default:l(({isActive:a})=>[t(x,{class:"d-flex flex-column"},{default:l(()=>[i("div",te,[t(N,null,{default:l(()=>[u(_(o(n).selectNote.Title),1)]),_:1}),t(S,{class:"ml-auto align-end mr-2"},{default:l(()=>[t(C),t(c,{text:"Закрыть",onClick:d=>a.value=!1},null,8,["onClick"])]),_:2},1024)]),t(y,null,{default:l(()=>[u(_(o(n).selectNote.Subtitle),1)]),_:1}),t(c,{disabled:!o(p).isLogin,width:"150px",class:"ml-auto mr-5 bg-red my-2 mb-5",text:"Удалить",onClick:e[5]||(e[5]=d=>o(n).dialog=!0)},null,8,["disabled"])]),_:2},1024)]),_:1})]),t(h,{modelValue:o(n).dialog,"onUpdate:modelValue":e[8]||(e[8]=a=>o(n).dialog=a),"max-width":"300"},{default:l(()=>[t(x,{title:"Удалить заметку?"},{default:l(()=>[t(S,null,{default:l(()=>[t(c,{text:"Да",class:"bg-red",variant:"text",onClick:e[6]||(e[6]=()=>{o(n).deleteNote(o(n).selectNote.ID)})}),t(C),t(c,{text:"Нет",variant:"text",onClick:e[7]||(e[7]=a=>o(n).dialog=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t($)]),_:1})]))}}};export{ae as default};
